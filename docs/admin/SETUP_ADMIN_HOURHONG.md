# hourhong@zipcheck.kr ê´€ë¦¬ì ì„¤ì • ê°€ì´ë“œ

## âœ… í˜„ì¬ ìƒíƒœ
- [x] Google Workspace í™œì„±í™” ì™„ë£Œ
- [x] hourhong@zipcheck.kr ê³„ì • ìƒì„± ì™„ë£Œ
- [ ] Supabase ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •
- [ ] ê´€ë¦¬ì ê¶Œí•œ ë¶€ì—¬
- [ ] ëŒ€ì‹œë³´ë“œ ì ‘ì† í…ŒìŠ¤íŠ¸

---

## ğŸš€ ì„¤ì • ë‹¨ê³„

### 1ë‹¨ê³„: ë¨¼ì € í•œ ë²ˆ ë¡œê·¸ì¸ (users í…Œì´ë¸” ë ˆì½”ë“œ ìƒì„±)

```bash
# Next.js ê°œë°œ ì„œë²„ ì‹œì‘
cd C:\dev\zipcheckv2\apps\web
npm run dev
```

1. **ë¸Œë¼ìš°ì €ì—ì„œ ì ‘ì†**: http://localhost:3000
2. **ë¡œê·¸ì¸ ë²„íŠ¼ í´ë¦­** (ë˜ëŠ” ë©”ì¸ í˜ì´ì§€ ìš°ì¸¡ ìƒë‹¨)
3. **"êµ¬ê¸€ë¡œ ê³„ì†í•˜ê¸°"** í´ë¦­
4. **hourhong@zipcheck.kr** ê³„ì • ì„ íƒ
5. **Google 2ë‹¨ê³„ ì¸ì¦** ì™„ë£Œ (ì„¤ì •ë˜ì–´ ìˆë‹¤ë©´)
6. **ë¡œê·¸ì¸ ì™„ë£Œ í™•ì¸** (í”„ë¡œí•„ í‘œì‹œ)
7. **ë¡œê·¸ì•„ì›ƒ** (ìš°ì¸¡ ìƒë‹¨ ë©”ë‰´)

> âš ï¸ ì´ ë‹¨ê³„ëŠ” **í•„ìˆ˜**ì…ë‹ˆë‹¤!
> Google OAuthë¡œ ì²˜ìŒ ë¡œê·¸ì¸í•˜ë©´ Supabaseê°€ ìë™ìœ¼ë¡œ `users` í…Œì´ë¸”ì— ë ˆì½”ë“œë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

---

### 2ë‹¨ê³„: Supabase SQL Editorì—ì„œ ê´€ë¦¬ì ê¶Œí•œ ë¶€ì—¬

#### ë°©ë²• A: Supabase Dashboard (ì›¹)

1. **Supabase Dashboard ì ‘ì†**
   - https://supabase.com/dashboard
   - í”„ë¡œì íŠ¸ ì„ íƒ: `gsiismzchtgdklvdvggu`

2. **SQL Editor ì´ë™**
   - ì¢Œì¸¡ ë©”ë‰´ â†’ **SQL Editor**

3. **SQL ì‹¤í–‰**
   - **New query** í´ë¦­
   - `C:\dev\zipcheckv2\setup_admin_quick.sql` íŒŒì¼ ë‚´ìš© ë³µì‚¬
   - ë¶™ì—¬ë„£ê¸° í›„ **Run** í´ë¦­

4. **ê²°ê³¼ í™•ì¸**
   ```
   âœ… ì„¤ì • ì™„ë£Œ!
   ì´ì œ http://localhost:3000/zc-ops-nx7k2 ì ‘ì† ê°€ëŠ¥
   ```

#### ë°©ë²• B: psql CLI (ì„ íƒì‚¬í•­)

```bash
# Supabase Dashboardì—ì„œ ì—°ê²° ë¬¸ìì—´ ë³µì‚¬
# Database â†’ Connection string â†’ URI

psql "postgresql://postgres.[PASSWORD]@db.gsiismzchtgdklvdvggu.supabase.co:5432/postgres"

# SQL íŒŒì¼ ì‹¤í–‰
\i C:/dev/zipcheckv2/setup_admin_quick.sql

# í™•ì¸
SELECT id, email, role FROM public.users WHERE email = 'hourhong@zipcheck.kr';
```

---

### 3ë‹¨ê³„: ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ì ‘ì† í…ŒìŠ¤íŠ¸

1. **ë¸Œë¼ìš°ì € ìƒˆ íƒ­ì—ì„œ ì ‘ì†**:
   ```
   http://localhost:3000/zc-ops-nx7k2
   ```

2. **ì˜ˆìƒ ë™ì‘**:
   - âœ… **ë¡œê·¸ì¸ ì™„ë£Œ ìƒíƒœ**: ë°”ë¡œ ëŒ€ì‹œë³´ë“œ í‘œì‹œ
   - âŒ **ë¡œê·¸ì•„ì›ƒ ìƒíƒœ**: Google ë¡œê·¸ì¸ í™”ë©´ í‘œì‹œ

3. **ë¡œê·¸ì¸ í™”ë©´ì´ ëœ¨ë©´**:
   - "Google ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸" ë²„íŠ¼ í´ë¦­
   - hourhong@zipcheck.kr ì„ íƒ
   - 2ë‹¨ê³„ ì¸ì¦ (í•„ìš” ì‹œ)
   - **4ë‹¨ê³„ ë³´ì•ˆ ê²€ì¦ í†µê³¼**:
     - âœ… Google OAuth SSO
     - âœ… ë„ë©”ì¸ í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ (@zipcheck.kr)
     - âœ… 2ë‹¨ê³„ ì¸ì¦ (MFA)
     - âœ… ê´€ë¦¬ì ê¶Œí•œ (role = 'admin')
   - ëŒ€ì‹œë³´ë“œ í‘œì‹œ!

---

## ğŸ¯ í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

### âœ… ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸

- [ ] http://localhost:3000 ì ‘ì†
- [ ] Google OAuthë¡œ hourhong@zipcheck.kr ë¡œê·¸ì¸
- [ ] í”„ë¡œí•„ì— ì´ë©”ì¼ í‘œì‹œ í™•ì¸
- [ ] ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ ë™ì‘ í™•ì¸

### âœ… ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ í…ŒìŠ¤íŠ¸

- [ ] http://localhost:3000/zc-ops-nx7k2 ì ‘ì†
- [ ] ë³´ì•ˆ ê²€ì¦ í†µê³¼ í™•ì¸
- [ ] ëŒ€ì‹œë³´ë“œ í—¤ë” í‘œì‹œ (hourhong@zipcheck.kr)
- [ ] KPI ì¹´ë“œ ë¡œë”© (GA4 ë¯¸ì„¤ì • ì‹œ ì—ëŸ¬ ì •ìƒ)
- [ ] ì „í™˜ í¼ë„ ì°¨íŠ¸ í‘œì‹œ
- [ ] ìœ ì… ì±„ë„ ì°¨íŠ¸ í‘œì‹œ
- [ ] ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ ë™ì‘

### âœ… ë³´ì•ˆ í…ŒìŠ¤íŠ¸ (ë‹¤ë¥¸ ê³„ì •)

- [ ] ë‹¤ë¥¸ Gmail ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸ ì‹œë„
  - ì˜ˆìƒ: "í—ˆìš©ëœ ë„ë©”ì¸(@zipcheck.kr)ì´ ì•„ë‹™ë‹ˆë‹¤" ì—ëŸ¬
- [ ] @zipcheck.kr ë„ë©”ì¸ì´ì§€ë§Œ role = 'user'ì¸ ê³„ì •ìœ¼ë¡œ ì‹œë„
  - ì˜ˆìƒ: "ê´€ë¦¬ì ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤" ì—ëŸ¬

---

## ğŸ› ï¸ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### âŒ "ì‚¬ìš©ì ì •ë³´ë¥¼ ì¡°íšŒí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤"

**ì›ì¸**: users í…Œì´ë¸”ì— ë ˆì½”ë“œê°€ ì—†ìŒ

**í•´ê²°**:
1. http://localhost:3000 ì ‘ì†
2. Google OAuthë¡œ ë¡œê·¸ì¸ (hourhong@zipcheck.kr)
3. ë¡œê·¸ì•„ì›ƒ
4. Supabase SQL Editorì—ì„œ ë‹¤ì‹œ í™•ì¸:
   ```sql
   SELECT id, email, role FROM public.users WHERE email = 'hourhong@zipcheck.kr';
   ```
5. ë ˆì½”ë“œ ìˆìœ¼ë©´ roleì„ 'admin'ìœ¼ë¡œ ì—…ë°ì´íŠ¸:
   ```sql
   UPDATE public.users SET role = 'admin' WHERE email = 'hourhong@zipcheck.kr';
   ```

---

### âŒ "Google ê³„ì •ì—ì„œ 2ë‹¨ê³„ ì¸ì¦ì„ í™œì„±í™”í•´ì£¼ì„¸ìš”"

**ì›ì¸**: Google ê³„ì •ì— 2ë‹¨ê³„ ì¸ì¦ì´ ë¹„í™œì„±í™”ë¨

**í•´ê²°**:
1. https://myaccount.google.com/security ì ‘ì†
2. "2ë‹¨ê³„ ì¸ì¦" â†’ "ì‚¬ìš© ì„¤ì •"
3. íœ´ëŒ€ì „í™” ë˜ëŠ” ë³´ì•ˆí‚¤ ë“±ë¡
4. ë‹¤ì‹œ ë¡œê·¸ì¸ ì‹œë„

---

### âŒ "í—ˆìš©ëœ ë„ë©”ì¸(@zipcheck.kr)ì´ ì•„ë‹™ë‹ˆë‹¤"

**ì›ì¸**: ê°œì¸ Gmail ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸ ì‹œë„

**í•´ê²°**: hourhong@zipcheck.kr (Google Workspace) ê³„ì • ì‚¬ìš© í•„ìš”

---

### âŒ KPI ì¹´ë“œì— "ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤" í‘œì‹œ

**ì›ì¸**: GA4 ì„¤ì • ëˆ„ë½ (ì •ìƒ)

**í•´ê²°** (ì„ íƒì‚¬í•­):
1. Google Analytics 4 ì„¤ì •
2. ì„œë¹„ìŠ¤ ê³„ì • í‚¤ ìƒì„±
3. `.env.local` íŒŒì¼ì— ì¶”ê°€:
   ```bash
   GA4_PROPERTY_ID=your_property_id
   GA_SERVICE_ACCOUNT_KEY_JSON={"type":"service_account",...}
   ```
4. Next.js ì„œë²„ ì¬ì‹œì‘

> âš ï¸ GA4 ì—†ì´ë„ ê´€ë¦¬ì í˜ì´ì§€ ì ‘ì† ë° ê¶Œí•œ ê²€ì¦ì€ ì •ìƒ ë™ì‘í•©ë‹ˆë‹¤.
> KPI ë°ì´í„°ë§Œ ë¡œë”© ì‹¤íŒ¨ ë©”ì‹œì§€ê°€ í‘œì‹œë  ë¿ì…ë‹ˆë‹¤.

---

## ğŸ“Š ë°ì´í„°ë² ì´ìŠ¤ ìƒíƒœ í™•ì¸

### Supabase SQL Editorì—ì„œ ì‹¤í–‰

```sql
-- 1. ê´€ë¦¬ì ê³„ì • í™•ì¸
SELECT
  id,
  email,
  role,
  created_at,
  updated_at
FROM public.users
WHERE role = 'admin';

-- ì˜ˆìƒ ê²°ê³¼:
-- email: hourhong@zipcheck.kr
-- role: admin

-- 2. admin_logs í…Œì´ë¸” í™•ì¸
SELECT COUNT(*) FROM public.admin_logs;

-- ì˜ˆìƒ ê²°ê³¼: 0 (ì²˜ìŒì—ëŠ” ë¡œê·¸ ì—†ìŒ, ì •ìƒ)

-- 3. RLS ì •ì±… í™•ì¸
SELECT
  schemaname,
  tablename,
  policyname,
  permissive,
  roles,
  cmd,
  qual
FROM pg_policies
WHERE tablename IN ('users', 'admin_logs');

-- ì˜ˆìƒ ê²°ê³¼: ì—¬ëŸ¬ ì •ì±… í‘œì‹œ (ì •ìƒ)

-- 4. í—¬í¼ í•¨ìˆ˜ í™•ì¸
SELECT
  proname,
  prosrc
FROM pg_proc
WHERE proname IN ('is_admin', 'log_admin_action');

-- ì˜ˆìƒ ê²°ê³¼: 2ê°œ í•¨ìˆ˜ í‘œì‹œ (ì •ìƒ)
```

---

## ğŸ‰ ì„±ê³µ ì‹œ í™”ë©´

### ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ (http://localhost:3000/zc-ops-nx7k2)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¯ ì§‘ì²´í¬ ê´€ë¦¬ì                                         â”‚
â”‚ ì‹¤ì‹œê°„ ìš´ì˜ ëŒ€ì‹œë³´ë“œ                                     â”‚
â”‚                                          âœ… ë³´ì•ˆ ì¸ì¦ ì™„ë£Œâ”‚
â”‚                                    hourhong@zipcheck.kr â”‚
â”‚                                          [ë¡œê·¸ì•„ì›ƒ]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“ˆ í•µì‹¬ ì§€í‘œ (ìµœê·¼ 7ì¼)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ í™œì„± ì‚¬ìš©ì  â”‚ ì‹ ê·œ ì‚¬ìš©ì  â”‚ ì„¸ì…˜ ìˆ˜      â”‚
â”‚ [ë¡œë”©ì¤‘...]  â”‚ [ë¡œë”©ì¤‘...]  â”‚ [ë¡œë”©ì¤‘...]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“Š ì „í™˜ í¼ë„ ë¶„ì„
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ì°¨íŠ¸ ë¡œë”©ì¤‘...]                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ‘¥ ìœ ì… ì±„ë„ TOP 10
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ì°¨íŠ¸ ë¡œë”©ì¤‘...]                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> ğŸ“ GA4 ë¯¸ì„¤ì • ì‹œ ì°¨íŠ¸ëŠ” "ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤" ë©”ì‹œì§€ í‘œì‹œ (ì •ìƒ)

---

## ğŸ“ ë‹¤ìŒ ë‹¨ê³„

### ìš´ì˜ í™˜ê²½ ë°°í¬ ì‹œ

1. **í”„ë¡œë•ì…˜ í™˜ê²½ë³€ìˆ˜ ì„¤ì •** (Vercel/Cloud Run)
   ```bash
   NEXT_PUBLIC_SUPABASE_URL=https://gsiismzchtgdklvdvggu.supabase.co
   NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key
   NEXT_PUBLIC_GOOGLE_CLIENT_ID=your_client_id
   GA4_PROPERTY_ID=your_property_id (ì„ íƒì‚¬í•­)
   GA_SERVICE_ACCOUNT_KEY_JSON={"type":"service_account",...} (ì„ íƒì‚¬í•­)
   ```

2. **Google Cloud Console ë¦¬ë””ë ‰ì…˜ URI ì¶”ê°€**
   ```
   https://zipcheck.kr/zc-ops-nx7k2
   https://gsiismzchtgdklvdvggu.supabase.co/auth/v1/callback
   ```

3. **Supabase í”„ë¡œë•ì…˜ DBì— SQL ì ìš©**
   - Supabase Dashboard â†’ SQL Editor
   - `setup_admin_quick.sql` ì‹¤í–‰

4. **Google Workspace 2ë‹¨ê³„ ì¸ì¦ ê°•ì œ ì„¤ì •**
   - admin.google.com â†’ ë³´ì•ˆ â†’ 2ë‹¨ê³„ ì¸ì¦ â†’ **í•„ìˆ˜**

---

**ì‘ì„±ì¼**: 2025-01-24
**ëŒ€ìƒ**: hourhong@zipcheck.kr ê´€ë¦¬ì ê³„ì •
